:host { display: block; height: 100%; font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }

/* Container + header */
.permission-container { padding: 1rem 1.25rem; background: linear-gradient(180deg,#f8fafc,#ffffff); min-height: 100vh; box-sizing: border-box; }
.header-row { display:flex; justify-content:space-between; align-items:flex-start; gap:1rem; margin-bottom: 1rem; }
.title { font-size: 1.25rem; font-weight: 600; color: #0f172a; display:flex; align-items:center; gap:0.5rem; margin:0; }
.title-icon { color:#0ea5e9; font-size:1.05rem; }
.subtitle { margin:4px 0 0 0; color:#475569; font-size:0.88rem; }

/* Grid */
.users-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 1rem; }

/* Card */
.card { background: #fff; border-radius: 12px; box-shadow: 0 6px 18px rgba(12, 14, 18, 0.04); border: 1px solid rgba(15, 23, 42, 0.04); overflow: hidden; transition: transform .18s ease, box-shadow .18s ease; }
.card:hover { transform: translateY(-6px); box-shadow: 0 10px 28px rgba(12,14,18,0.06); }
.card.dirty { box-shadow: 0 0 0 3px rgba(59,130,246,0.08); }

/* Header row inside card */
.card-header { display:flex; justify-content:space-between; align-items:center; padding: 12px 14px; gap:10px; cursor: pointer; }
.card-header .left { display:flex; align-items:center; gap:12px; }
.avatar { width:44px; height:44px; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; font-size:0.95rem; flex-shrink:0; }
.meta .name { font-weight:600; color:#0f172a; }
.meta .email { font-size:0.82rem; color:#64748b; margin-top:2px; }

/* right area (role + chevron) */
.right { display:flex; align-items:center; gap:10px; }
.chevron { font-size:1rem; color:#94a3b8; transition: transform .2s ease, color .15s ease; }
.chevron.open { color:#0ea5e9; transform: rotate(180deg); }

/* Expanded area container */
.expanded { overflow: hidden; transition: max-height .32s cubic-bezier(.2,.9,.2,1), opacity .2s linear; }
.expanded-inner { display:flex; flex-direction:column; gap:12px; padding:12px; background: #f8fafc; border-top:1px solid rgba(15,23,42,0.04); }

/* Top controls */
.expanded-top { display:flex; justify-content:space-between; align-items:center; gap:12px; padding-bottom:6px; }
.toggle-all { display:flex; align-items:center; gap:8px; }
.toggle-label { font-size:0.85rem; color:#334155; }

/* permissions list (scrollable) */
.permissions-list { overflow:auto; padding-right:6px; max-height: calc(50vh - 140px); } /* ensures the sticky save bar fits */
.perm-group { margin-bottom:12px; }
.perm-group-title { font-size:0.9rem; font-weight:600; color:#0f172a; margin-bottom:8px; display:flex; align-items:center; gap:8px; }
.perm-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:8px; }
.perm-item { display:flex; align-items:center; justify-content:space-between; gap:8px; background:#fff; border-radius:8px; padding:8px 10px; border:1px solid rgba(15,23,42,0.04); }
.perm-left { display:flex; flex-direction:column; gap:4px; }
.perm-name { font-size:0.92rem; color:#0f172a; }
.perm-tag { font-size:0.75rem; color:#64748b; }

/* Sticky save bar inside expanded area */
.save-bar { position: sticky; bottom:0; display:flex; justify-content:space-between; align-items:center; gap:12px; padding:10px 12px; background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(248,250,252,0.98)); border-top:1px solid rgba(15,23,42,0.04); }
.save-left.small-note { color:#334155; font-size:0.85rem; }
.save-actions button.p-button { min-width:120px; }

/* Loading / error states */
.state-container { display:flex; flex-direction:column; align-items:center; justify-content:center; padding: 2.5rem 1rem; gap:12px; color:#475569; }
.error-icon { font-size:2rem; color:#dc2626; }
.loading-text, .error-text { font-weight:600; color:#0f172a; }

/* custom scrollbar for the permissions area (webkit) */
.permissions-list::-webkit-scrollbar { width:8px; }
.permissions-list::-webkit-scrollbar-track { background: transparent; }
.permissions-list::-webkit-scrollbar-thumb { background: rgba(148,163,184,0.4); border-radius:8px; }
.permissions-list::-webkit-scrollbar-thumb:hover { background: rgba(148,163,184,0.6); }

/* Responsive tweaks */
@media (max-width: 640px) {
  .users-grid { grid-template-columns: 1fr; }
  .perm-grid { grid-template-columns: 1fr; }
}

.user-card-header {
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

.user-card-header:hover {
  background-color: #f8fafc; /* Light hover */
}

:host ::ng-deep .p-inputswitch {
  transform: scale(0.9);
}

:host ::ng-deep .p-inputswitch-slider {
  transition: all 0.25s ease;
}

:host ::ng-deep .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider {
  background: #2563eb !important; /* blue-600 */
}
