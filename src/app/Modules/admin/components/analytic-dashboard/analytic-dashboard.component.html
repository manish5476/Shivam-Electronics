<div class="analytics-container" *ngIf="data">

  <!-- Top Metrics Row -->
  <div class="metrics-row">
    <div class="metric-card" *ngFor="let kpi of kpis">
      <div class="metric-title">{{ kpi.title }}</div>
      <div class="metric-value">{{ kpi.value }} <span class="change {{kpi.change.direction}}">{{kpi.change.value}}%</span></div>
      <!-- <p-chart type="line" [data]="kpi.chartData" [options]="smallChartOptions" class="small-chart"></p-chart> -->
    </div>
  </div>

  <!-- Middle Row: Top Products & Traffic -->
  <div class="middle-row">
    <div class="products-card">
      <div class="card-title">Top Products<p-select appendTo="body"  [options]="periodOptions" [(ngModel)]="selectedPeriod" styleClass="small-selectp-select"></p-select></div>
      <p-chart type="line" [data]="chartData" [options]="chartOptions"></p-chart>
    </div>
    <div class="traffic-card">
      <div class="card-title">Traffic<p-select appendTo="body"  [options]="periodOptions" [(ngModel)]="selectedPeriod" styleClass="small-selectp-select"></p-select></div>
      <div class="traffic-list">
        <div class="traffic-item" *ngFor="let item of trafficData">
          <div class="traffic-label"><span class="traffic-dot" [style.background-color]="item.color"></span>{{item.label}}</div>
          <div class="traffic-value">{{item.value}}%</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bottom Row: Leaderboard, Product List, Seller List -->
  <div class="bottom-row">
    <div class="leaderboard-card">
      <div class="card-title">Leaderboard ...</div>
      <div class="list-item" *ngFor="let leader of leaders">
        <div class="avatar" [style.background-color]="leader.color">{{leader.initials}}</div>
        <div class="name">{{leader.name}}</div>
        <div class="amount">{{leader.amount}} <span class="change {{leader.changeDirection}}"></span></div>
      </div>
    </div>
    <div class="product-list-card">
      <div class="card-title">Product List ...</div>
      <div class="list-item" *ngFor="let product of products">
        <img [src]="product.image" (error)="onImageError($event)" alt="{{product.name}}" class="product-img">
        <div class="product-info">
          <div class="product-name">{{product.name}}</div>
          <div class="product-user">{{product.user}}</div>
        </div>
        <span class="arrow {{product.arrow}}"></span>
      </div>
    </div>
    <div class="seller-list-card">
      <div class="card-title">Seller List ...</div>
      <div class="list-item" *ngFor="let seller of sellers">
        <img [src]="seller.photo" (error)="onImageError($event)" alt="{{seller.name}}" class="seller-img">
        <div class="seller-name">{{seller.name}}</div>
        <div class="rating">â˜… {{seller.rating}} ...</div>
      </div>
    </div>
  </div>

</div>