<div class="chart-panel card">
  <!-- Chart Header -->
  <div class="chart-header">
    <h3 class="section-header">Yearly Sales</h3>
    <div class="flex items-center gap-2">
      <p-dropdown [options]="chartTypeOptions" [(ngModel)]="selectedChartType" (onChange)="onChartTypeChange()" optionLabel="label" optionValue="value" styleClass="p-dropdown-sm w-48">
          <ng-template let-item pTemplate="selectedItem">
              <i [class]="item.icon" class="mr-2"></i>
              <span>{{item.label}}</span>
          </ng-template>
          <ng-template let-item pTemplate="item">
              <div class="flex items-center gap-2">
                  <i [class]="item.icon"></i>
                  <span>{{item.label}}</span>
              </div>
          </ng-template>
      </p-dropdown>
      <input pInputText [(ngModel)]="yearInput" placeholder="Year" class="p-inputtext-sm w-28" />
      <button pButton label="Fetch" icon="pi pi-refresh" class="p-button-sm" (click)="fetchSalesData()"></button>
    </div>
  </div>

  <!-- Chart Body -->
  <div class="chart-body">
    <ng-container *ngIf="isLoading; else chartView">
      <p-skeleton width="100%" height="100%"></p-skeleton>
    </ng-container>
    <ng-template #chartView>
      <div class="chart-wrapper">
        <p-chart *ngIf="chartData" [type]="selectedChartType === 'combo' ? 'bar' : selectedChartType" [data]="chartData" [options]="chartOptions" height="100%"></p-chart>
        <div *ngIf="!chartData" class="flex items-center justify-center h-full text-[var(--theme-text-secondary)]">
            No data to display for the selected period.
        </div>
      </div>
    </ng-template>
  </div>
</div>