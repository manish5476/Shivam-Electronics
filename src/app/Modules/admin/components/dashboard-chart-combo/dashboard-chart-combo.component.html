<div class="chart-panel card">
  <div class="chart-header">
    <h3 class="section-header">{{ chartTitle }}</h3>

    <div class="flex items-center gap-4">
      <p-dropdown [options]="(chartOptions$ | async) || []" [(ngModel)]="selectedChart" name="selectedChart"
        placeholder="Select a Chart" optionLabel="label" optionValue="value" styleClass="p-inputtext-sm"
        (onChange)="fetchChartData()">
      </p-dropdown>

      <p-dropdown [options]="periodOptions" [(ngModel)]="selectedPeriod" name="selectedPeriod"
        placeholder="Select a Period" optionLabel="label" optionValue="value" styleClass="p-inputtext-sm"
        (onChange)="fetchChartData()">
      </p-dropdown>
    </div>
  </div>

  <div class="chart-body">
    <ng-container *ngIf="isLoading; else chartView">
      <p-skeleton width="100%" height="100%"></p-skeleton>
    </ng-container>
    <ng-template #chartView>
      <p-chart *ngIf="chartData" [type]="chartType" [data]="chartData" [options]="chartOptions" height="100%"></p-chart>
      <div *ngIf="!chartData" class="flex items-center justify-center h-full text-gray-500">
        <p>No data to display for the selected criteria.</p>
      </div>
    </ng-template>
  </div>
</div>