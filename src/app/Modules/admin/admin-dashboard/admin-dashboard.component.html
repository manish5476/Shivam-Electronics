<div class="dashboard-main-container p-4 md:p-6">
  <div class="card mb-6">
    <div class="flex items-center mb-4">
      <div class="w-1 h-8 bg-[var(--theme-accent-gradient,var(--theme-accent-primary))] rounded-full mr-4"></div>
      <h4 class="text-xl font-bold text-[var(--theme-text-primary)]">Date Range Filter</h4>
    </div>
    <div class="flex flex-wrap items-end -mx-2">
      <div class="w-full md:w-1/4 px-2 mb-4 md:mb-0">
        <label for="periodSelect" class="text-[var(--theme-text-label)] font-medium mb-2 block">Predefined
          Period:</label>
        <select id="periodSelect" [(ngModel)]="selectedPeriod" (ngModelChange)="onPeriodChange($event)"
          class="p-inputtext w-full">
          <option value="today">Today</option>
          <option value="yesterday">Yesterday</option>
          <option value="week">This Week</option>
          <option value="month">This Month</option>
          <option value="last_month">Last Month</option>
          <option value="year">This Year</option>
        </select>
      </div>
      <div class="w-full md:w-1/4 px-2 mb-4 md:mb-0">
        <label for="customStartDate" class="text-[var(--theme-text-label)] font-medium mb-2 block">Start Date:</label>
        <input type="date" id="customStartDate" [(ngModel)]="customStartDate" class="p-inputtext w-full">
      </div>
      <div class="w-full md:w-1/4 px-2 mb-4 md:mb-0">
        <label for="customEndDate" class="text-[var(--theme-text-label)] font-medium mb-2 block">End Date:</label>
        <input type="date" id="customEndDate" [(ngModel)]="customEndDate" class="p-inputtext w-full">
      </div>
      <div class="w-full md:w-1/4 px-2">
        <button pButton type="button" label="Apply & Reload" icon="pi pi-refresh" class="p-button w-full h-12"></button>
      </div>
      <!-- <div class="w-full md:w-1/4 px-2">
        <button pButton type="button" label="permission" (click)="showPermission=true" icon="pi pi-refresh"
          class="p-button w-full h-12">Permission</button>
      </div> -->
    </div>
  </div>

  <!-- Metrics Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-6">
    <div class="metric-card metric-card-accent">
      <div class="metric-icon">
        <i class="pi pi-user-plus text-2xl"></i>
      </div>
      <div>
        <div class="metric-value">{{ newCustomersCountData || 0 }}</div>
        <div class="metric-label">New Customers</div>
      </div>
    </div>
    <!-- Sales Count -->
    <div class="metric-card metric-card-success">
      <div class="metric-icon">
        <i class="pi pi-shopping-bag text-2xl"></i>
      </div>
      <div>
        <div class="metric-value">{{ salesTrends[0].dailySalesCount || 0 }}</div>
        <div class="metric-label">Sales Count</div>
      </div>
    </div>
    <!-- Daily Revenue -->
    <div class="metric-card metric-card-error">
      <div class="metric-icon">
        <i class="pi pi-dollar text-2xl"></i>
      </div>
      <div>
        <div class="metric-value">{{ salesTrends[0].dailyRevenue  | number:'1.2-2' }}</div>
        <div class="metric-label">Daily Revenue</div>
      </div>
    </div>
    <!-- Inventory Value -->
    <div class="metric-card metric-card-warning">
      <div class="metric-icon">
        <i class="pi pi-box text-2xl"></i>
      </div>
      <div>
        <div class="metric-value">{{ totalInventoryValueData?.totalValue || 0 | number:'1.2-2' }}</div>
        <div class="metric-label">Inventory Value</div>
      </div>
    </div>
    <!-- Inventory Stock -->
    <div class="metric-card metric-card-info">
      <div class="metric-icon">
        <i class="pi pi-inbox text-2xl"></i>
      </div>
      <div>
        <div class="metric-value">{{ totalInventoryValueData?.totalItemsInStock || 0 }}</div>
        <div class="metric-label">Total Stock</div>
      </div>
    </div>
  </div>

  <!-- Charts & Data Section -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
    <div class="card lg:col-span-2">
      <h3 class="text-xl font-bold text-[var(--theme-text-primary)] mb-4">Summary</h3>
      <app-dashboard-summary [params]="getDateParam"></app-dashboard-summary>
    </div>
    <div class="card lg:col-span-2">
      <h3 class="text-xl font-bold text-[var(--theme-text-primary)] mb-4">Top Customers</h3>
      <app-dashboard-top-customer-view [params]="getDateParam"></app-dashboard-top-customer-view>
    </div>
    <div class="card">
      <h3 class="text-xl font-bold text-[var(--theme-text-primary)] mb-4">Yearly Sales</h3>
      <app-dashboard-chart-component></app-dashboard-chart-component>
    </div>
    <div class="card">
      <h3 class="text-xl font-bold text-[var(--theme-text-primary)] mb-4">Sales Combo</h3>
      <app-dashboard-chart-combo></app-dashboard-chart-combo>
    </div>

  </div>

  <!-- Quick Links -->
  <div class="card">
    <div class="flex items-center mb-4">
      <div class="w-1 h-8 bg-[var(--theme-accent-gradient,var(--theme-accent-primary))] rounded-full mr-4"></div>
      <h3 class="text-xl font-bold text-[var(--theme-text-primary)]">Quick Links</h3>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <div class="quick-link-card" (click)="showcustomerGrid=true">
        <div class="quick-link-icon icon-accent"><i class="pi pi-users text-3xl"></i></div>
        <span class="quick-link-label">View Customers</span>
      </div>
      <div class="quick-link-card" (click)="showproductGrid=true">
        <div class="quick-link-icon icon-success"><i class="pi pi-mobile text-3xl"></i></div>
        <span class="quick-link-label">View Products</span>
      </div>
      <div class="quick-link-card" (click)="showInvoiceGrid=true">
        <div class="quick-link-icon icon-warning"><i class="pi pi-pen-to-square text-3xl"></i></div>
        <span class="quick-link-label">View Invoices</span>
      </div>
      <div class="quick-link-card" (click)="showPaymentGrid=true">
        <div class="quick-link-icon icon-error"><i class="pi pi-money-bill text-3xl"></i></div>
        <span class="quick-link-label">View Payments</span>
      </div>
    </div>
  </div>

  <!-- PrimeNG Dialogs -->
  <p-dialog header="Customers" [(visible)]="showcustomerGrid" [modal]="true"
    [style]="{ width: '95vw', maxWidth: '1400px' }">
    <app-customer-list></app-customer-list>
  </p-dialog>
  <p-dialog header="Products" [(visible)]="showproductGrid" [modal]="true"
    [style]="{ width: '95vw', maxWidth: '1400px' }">
    <app-product-list></app-product-list>
  </p-dialog>
  <p-dialog header="Invoices" [(visible)]="showInvoiceGrid" [modal]="true"
    [style]="{ width: '95vw', maxWidth: '1400px' }">
    <app-invoice-view></app-invoice-view>
  </p-dialog>
  <p-dialog header="Payments" [(visible)]="showPaymentGrid" [modal]="true"
    [style]="{ width: '95vw', maxWidth: '1400px' }">
    <app-payment-list></app-payment-list>
  </p-dialog>
  <p-dialog header="Invoice" [(visible)]="showpdf" [modal]="true" [style]="{ width: '95vw', maxWidth: '1200px' }">
    <app-invoice-print [Id]="dashboard.invoiceId"></app-invoice-print>
  </p-dialog>
  <p-dialog header="Permission" [(visible)]="showPermission" [modal]="true"
    [style]="{ width: '95vw', maxWidth: '1200px' }">
    <!-- <app-permissions></app-permissions> -->
  </p-dialog>
</div>