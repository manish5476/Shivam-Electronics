<!-- <div class="card p-5 overflow-auto shadow-[0px_1px_2px_0px_rgba(18,18,23,0.05)]" [formGroup]="invoiceForm">

  <div class="flex items-start pt-6 px-6 pb-9 gap-6 flex-wrap-reverse">
      <div class="flex-1">
          <svg width="125" height="32" viewBox="0 0 125 32" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-surface-950 dark:fill-surface-0">
              <path d="M26.8844 16C27.5005 16 28.0045 15.4997 27.9555 14.8856C27.7658 12.5094 26.9717 10.2143 25.6405 8.222C24.1022 5.91972 21.9157 4.12531 19.3575 3.06569C16.7994 2.00607 13.9844 1.72882 11.2687 2.26901C8.55298 2.8092 6.05843 4.14257 4.1005 6.1005C2.14257 8.05843 0.809203 10.553 0.269011 13.2687C-0.27118 15.9844 0.00606599 18.7994 1.06569 21.3575C2.12531 23.9157 3.91972 26.1022 6.222 27.6405C8.21425 28.9717 10.5094 29.7658 12.8856 29.9555C13.4997 30.0045 14 29.5005 14 28.8844V25.5155C14 24.8994 13.4983 24.4076 12.8877 24.326C11.6208 24.1567 10.4041 23.6998 9.33319 22.9843C7.95182 22.0613 6.87517 20.7494 6.2394 19.2145C5.60362 17.6796 5.43728 15.9906 5.76139 14.3612C6.08551 12.7318 6.88553 11.235 8.06028 10.0603C9.23504 8.88553 10.7318 8.08551 12.3612 7.76139C13.9906 7.43728 15.6796 7.60362 17.2145 8.2394C18.7494 8.87517 20.0613 9.95182 20.9843 11.3332C21.6998 12.4041 22.1567 13.6208 22.326 14.8877C22.4076 15.4983 22.8994 16 23.5155 16H26.8844Z"></path><path d="M20.3442 17.9561C20.4501 17.6123 20.1787 17.2829 19.819 17.2829H16.3982C15.7821 17.2829 15.2826 17.7823 15.2826 18.3984V21.8191C15.612 22.1788 15.9558 22.4502 15.9558 22.3443C18.0484 21.6999 19.6997 20.0487 20.3442 17.9561Z"></path><path d="M23.1621 17.2829C22.6154 17.2829 22.1582 17.6844 22.013 18.2115C21.2385 21.0236 19.0234 23.2387 16.2113 24.0131C15.6842 24.1582 15.2826 24.6155 15.2826 25.1622V28.8845C15.2826 29.5006 15.7821 30 16.3982 30H18.6292C19.2453 30 19.7448 29.5006 19.7448 28.8845V25.0941C19.7448 24.8904 19.991 24.7885 20.135 24.9325L24.4655 29.263C24.9011 29.6986 25.6075 29.6986 26.0431 29.263L27.2627 28.0434C27.6983 27.6077 27.6983 26.9014 27.2627 26.4658L22.9322 22.1353C22.7882 21.9913 22.8902 21.745 23.0938 21.745H26.8842C27.5003 21.745 27.9997 21.2456 27.9997 20.6295V18.3984C27.9997 17.7823 27.5003 17.2829 26.8842 17.2829H23.1621Z"></path><path d="M47.624 10.048C44.144 10.048 42.152 12.568 42.152 16.36C42.152 20.272 44.408 22.408 47.648 22.408C50.696 22.408 52.544 20.728 52.544 17.92V17.848H47.24V15.136H55.4V25H52.808L52.616 22.984C51.656 24.328 49.664 25.264 47.288 25.264C42.368 25.264 38.936 21.688 38.936 16.288C38.936 10.96 42.416 7.168 47.696 7.168C51.704 7.168 54.8 9.496 55.304 13.072H52.064C51.512 11.008 49.736 10.048 47.624 10.048ZM63.3494 25.312C59.8214 25.312 57.3494 22.744 57.3494 19.072C57.3494 15.352 59.7734 12.784 63.2534 12.784C66.8054 12.784 69.0614 15.16 69.0614 18.856V19.744L60.1334 19.768C60.3494 21.856 61.4534 22.912 63.3974 22.912C65.0054 22.912 66.0614 22.288 66.3974 21.16H69.1094C68.6054 23.752 66.4454 25.312 63.3494 25.312ZM63.2774 15.184C61.5494 15.184 60.4934 16.12 60.2054 17.896H66.1574C66.1574 16.264 65.0294 15.184 63.2774 15.184ZM74.0928 25H71.1648V13.144H73.8768L74.1168 14.68C74.8608 13.48 76.3008 12.784 77.9088 12.784C80.8848 12.784 82.4208 14.632 82.4208 17.704V25H79.4928V18.4C79.4928 16.408 78.5088 15.448 76.9968 15.448C75.1968 15.448 74.0928 16.696 74.0928 18.616V25ZM90.3616 25.312C86.8336 25.312 84.3616 22.744 84.3616 19.072C84.3616 15.352 86.7856 12.784 90.2656 12.784C93.8176 12.784 96.0736 15.16 96.0736 18.856V19.744L87.1456 19.768C87.3616 21.856 88.4656 22.912 90.4096 22.912C92.0176 22.912 93.0736 22.288 93.4096 21.16H96.1216C95.6176 23.752 93.4576 25.312 90.3616 25.312ZM90.2896 15.184C88.5616 15.184 87.5056 16.12 87.2176 17.896H93.1696C93.1696 16.264 92.0416 15.184 90.2896 15.184ZM97.265 21.4H100.049C100.073 22.432 100.841 23.08 102.185 23.08C103.553 23.08 104.297 22.528 104.297 21.664C104.297 21.064 103.985 20.632 102.929 20.392L100.793 19.888C98.657 19.408 97.625 18.4 97.625 16.504C97.625 14.176 99.593 12.784 102.329 12.784C104.993 12.784 106.793 14.32 106.817 16.624H104.033C104.009 15.616 103.337 14.968 102.209 14.968C101.057 14.968 100.385 15.496 100.385 16.384C100.385 17.056 100.913 17.488 101.921 17.728L104.057 18.232C106.049 18.688 107.057 19.6 107.057 21.424C107.057 23.824 105.017 25.312 102.089 25.312C99.137 25.312 97.265 23.728 97.265 21.4ZM110.51 10.768C109.502 10.768 108.71 9.976 108.71 8.992C108.71 8.008 109.502 7.24 110.51 7.24C111.47 7.24 112.262 8.008 112.262 8.992C112.262 9.976 111.47 10.768 110.51 10.768ZM109.046 25V13.144H111.974V25H109.046ZM113.847 21.4H116.631C116.655 22.432 117.423 23.08 118.767 23.08C120.135 23.08 120.879 22.528 120.879 21.664C120.879 21.064 120.567 20.632 119.511 20.392L117.375 19.888C115.239 19.408 114.207 18.4 114.207 16.504C114.207 14.176 116.175 12.784 118.911 12.784C121.575 12.784 123.375 14.32 123.399 16.624H120.615C120.591 15.616 119.919 14.968 118.791 14.968C117.639 14.968 116.967 15.496 116.967 16.384C116.967 17.056 117.495 17.488 118.503 17.728L120.639 18.232C122.631 18.688 123.639 19.6 123.639 21.424C123.639 23.824 121.599 25.312 118.671 25.312C115.719 25.312 113.847 23.728 113.847 21.4Z"></path></svg>
          <div class="mt-3 text-sm text-left text-gray-700 dark:text-gray-300">
               {{ InvoiceObject.sellersselec?.address || '9137 3rd Lane California CityCA 93504, U.S.A.' }}
          </div>
           <div class="form-group mt-4" style="display: none;">
               <label for="seller" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Billed By</label>
               <p-select appendTo="body" [options]="InvoiceObject.sellersDrop" optionLabel="name" optionValue="_id" formControlName="seller"
                         placeholder="Select Seller" class="w-full"></p-select>
           </div>
      </div>

      <div class="flex flex-col text-right">
          <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Invoice</h1>
          <div class="flex items-center justify-end mt-1.5">
               <span class="text-md font-medium text-gray-700 dark:text-gray-300 mr-2">#</span>
               <input type="text" formControlName="invoiceNumber" placeholder="Invoice No"
                      class="w-32 text-right text-lg font-semibold text-gray-900 dark:text-white bg-transparent border-b border-gray-400 outline-none" />
           </div>
      </div>
  </div>

  <p-divider></p-divider> <div class="px-6 pb-9 pt-6 flex items-start gap-6 flex-wrap sm:flex-row flex-col">
      <div class="flex-1">
          <div class="text-sm font-medium text-gray-500 dark:text-gray-400">Bill To:</div>
          <div class="form-group mt-4" style="display: none;">
               <label for="buyer" class="block text-sm font-medium text-gray-700 dark:text-gray-200">Billed To</label>
               <p-select appendTo="body" [options]="InvoiceObject.customerIDDropdown" optionLabel="fullname" optionValue="_id"
                         formControlName="buyer" placeholder="Select Buyer" class="w-full"></p-select>
           </div>
          <div class="mt-2 text-md font-medium text-gray-900 dark:text-white">{{ InvoiceObject.buyerselect?.fullname || 'Select Client' }}</div>
          <div class="text-sm text-left mt-0.5 text-gray-700 dark:text-gray-300">
              {{ InvoiceObject.buyerselect?.address || 'Address will appear here' }}
          </div>
      </div>

      <div class="flex flex-col gap-3 min-w-64">
          <div class="flex items-center justify-between gap-6">
              <span class="text-sm text-gray-700 dark:text-gray-300">Date</span>
               <p-calendar appendTo="body" [showIcon]="true" iconDisplay="input" formControlName="invoiceDate"
                          dateFormat="mm/dd/yy" class="w-32"></p-calendar>
          </div>
           <div class="flex items-center justify-between gap-6">
              <span class="text-sm text-gray-700 dark:text-gray-300">Due Date</span>
               <p-calendar appendTo="body" [showIcon]="true" iconDisplay="input" formControlName="dueDate"
                          dateFormat="mm/dd/yy" class="w-32"></p-calendar>
          </div>
          <div class="flex items-center justify-between gap-6">
              <span class="text-sm text-gray-700 dark:text-gray-300">Customer ID</span>
               <span class="text-sm font-medium text-gray-900 dark:text-white">{{ InvoiceObject.buyerselect?._id || 'N/A' }}</span>
          </div>
           <div class="flex items-center justify-between gap-6">
               <span class="text-sm text-gray-700 dark:text-gray-300">Place of Supply</span>
               <span class="text-sm font-medium text-gray-900 dark:text-white">{{ invoiceForm.get('placeOfSupply')?.value || 'N/A' }}</span>
           </div>
      </div>
  </div>

  <p-divider></p-divider>
   <div class="px-6 pb-9 pt-6">
      <p-table [value]="itemsFormArray.controls" formArrayName="items" class="p-datatable p-component w-full">
          <ng-template pTemplate="header">
              <tr>
                  <th>Item</th>
                  <th>GST (%)</th>
                  <th>Quantity</th>
                  <th>Rate (Ex-GST)</th>
                  <th>Discount (%)</th>
                  <th>Taxable Value</th>
                  <th>GST Amount</th>
                  <th>Total Amount</th>
                  <th class="text-center">Actions</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-itemFormGroup let-i="rowIndex">
              <tr [formGroupName]="i">
                  <td>
                      <p-select appendTo="body" formControlName="product" (onChange)="onProductChange($event, i)"
                                [options]="InvoiceObject.productdrop" optionValue="_id" optionLabel="title"
                                class="w-full"></p-select>
                  </td>
                  <td>
                       <input type="number" formControlName="gstRate" (input)="onItemValueChange(i)"
                              class="w-full p-inputtext p-component text-sm bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 rounded-md px-2 py-1"
                              step="0.01" placeholder="0" />
                  </td>
                  <td>
                       <input type="number" formControlName="quantity" (input)="onItemValueChange(i)"
                              class="w-full p-inputtext p-component text-sm bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 rounded-md px-2 py-1"
                              step="1" placeholder="0" />
                  </td>
                  <td>
                       <input type="number" formControlName="rate" (input)="onItemValueChange(i)"
                              class="w-full p-inputtext p-component text-sm bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 rounded-md px-2 py-1"
                              step="0.01" placeholder="0" />
                  </td>
                   <td>
                       <input type="number" formControlName="discount" (input)="onItemValueChange(i)"
                              class="w-full p-inputtext p-component text-sm bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 rounded-md px-2 py-1"
                              step="0.01" placeholder="0" />
                  </td>
                  <td>
                      <input type="number" formControlName="taxableValue" readonly
                             class="w-full p-inputtext p-component text-sm bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 border border-gray-300 rounded-md px-2 py-1 opacity-70 cursor-not-allowed" />
                  </td>
                   <td>
                       <input type="number" formControlName="gstAmount" readonly
                              class="w-full p-inputtext p-component text-sm bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 border border-gray-300 rounded-md px-2 py-1 opacity-70 cursor-not-allowed" />
                   </td>
                  <td>
                      <input type="number" formControlName="amount" readonly
                             class="w-full p-inputtext p-component text-sm bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-200 border border-gray-300 rounded-md px-2 py-1 opacity-70 cursor-not-allowed" />
                  </td>
                  <td class="text-center">
                      <div class="flex items-center justify-center space-x-2">
                           <button type="button" class="text-green-500 hover:text-green-700" (click)="addItem()">
                              <i class="fas fa-plus text-base"></i>
                          </button>
                           <button type="button" class="text-red-500 hover:text-red-700" (click)="removeItem(i)">
                              <i class="fas fa-trash text-base"></i>
                          </button>
                      </div>
                  </td>
              </tr>
          </ng-template>
      </p-table>
  </div>

  <div class="py-6 px-4 flex items-start gap-6 flex-wrap sm:flex-row flex-col">
      <div class="flex-1 flex flex-col gap-2">
           <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Notes</span>
            <textarea class="w-full p-inputtext p-component text-sm bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 rounded-md px-3 py-2" rows="3" placeholder="Add notes or terms..."></textarea>
       </div>

      <div class="flex flex-col gap-3 min-w-52">
           <div class="flex items-center justify-between">
              <span class="text-sm font-medium text-gray-900 dark:text-white">Subtotal</span>
              <span class="text-sm text-gray-700 dark:text-gray-300">₹ {{ invoiceForm.get('subTotal')?.value | number : "1.2-2" }}</span>
          </div>
          <div class="flex items-center justify-between">
               <span class="text-sm font-medium text-gray-900 dark:text-white">GST</span>
               <span class="text-sm text-gray-700 dark:text-gray-300">₹ {{ invoiceForm.get('gst')?.value | number : "1.2-2" }}</span>
           </div>
           <div class="flex items-center justify-between">
               <span class="text-sm font-medium text-gray-900 dark:text-white">CESS</span>
               <span class="text-sm text-gray-700 dark:text-gray-300">₹ {{ invoiceForm.get('cess')?.value | number : "1.2-2" }}</span>
           </div>
           <div class="flex items-center justify-between">
               <span class="text-sm font-medium text-gray-900 dark:text-white">Discount</span>
               <span class="text-sm text-gray-700 dark:text-gray-300">₹ {{ invoiceForm.get('totalDiscount')?.value | number : "1.2-2" }}</span>
           </div>

           <div class="flex items-center justify-between gap-4 mt-4">
               <div class="flex items-center gap-2">
                   <p-checkbox formControlName="roundUp" binary="true" (onChange)="calculateInvoiceTotals()" class="p-checkbox p-component"></p-checkbox>
                   <label class="text-sm text-gray-700 dark:text-gray-300">Round Up</label>
               </div>
               <div class="flex items-center gap-2">
                   <p-checkbox formControlName="roundDown" binary="true" (onChange)="calculateInvoiceTotals()" class="p-checkbox p-component"></p-checkbox>
                   <label class="text-sm text-gray-700 dark:text-gray-300">Round Down</label>
               </div>
           </div>

           <div class="flex items-center justify-between border-t border-gray-400 pt-4 mt-4">
              <span class="text-lg font-bold text-gray-900 dark:text-white">Total</span>
              <span class="text-lg font-bold text-gray-900 dark:text-white">₹ {{ invoiceForm.get('totalAmount')?.value | number : "1.2-2" }}</span>
          </div>
      </div>
  </div>

   <div class="text-center mt-8">
       <p-button label="Save Invoice" (onClick)="saveInvoice()"></p-button>
   </div>

</div> -->
<div class="bg-gray-100 text-gray-900" [formGroup]="invoiceForm">
  <div class="w-full mx-auto p-6 bg-gray-200 shadow-md mt-10 rounded-lg">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold text-purple-400">GST Invoice</h1>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
      <div class="form-group">
        <label for="invoiceNumber">Invoice No*</label>
        <input type="text" id="invoiceNumber" formControlName="invoiceNumber" placeholder="Enter Invoice No"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm h-10 bg-white text-gray-900 focus:ring-primary-light focus:border-primary-light" />
      </div>
      <div class="form-group">
        <label for="invoiceDate">Invoice Date*</label>
        <input type="date" id="invoiceDate" formControlName="invoiceDate"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm h-10 bg-white text-gray-900 focus:ring-primary-light focus:border-primary-light" />
      </div>
      <div class="form-group">
        <label for="dueDate">Due Date</label>
        <input type="date" id="dueDate" formControlName="dueDate" placeholder="Enter Due Date"
          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm h-10 bg-white text-gray-900 focus:ring-primary-light focus:border-primary-light" />
      </div>
      <div class="form-group">
        <label>Billed By (Your Details)</label>
        <p-select appendTo="body" [options]="InvoiceObject.sellersDrop" optionLabel="name" optionValue="_id" formControlName="seller"
          placeholder="Select Seller" class="w-full"></p-select>
      </div>
      <div class="form-group">
        <label>Billed To (Client Details)</label>
        <p-select appendTo="body" [options]="InvoiceObject.customerIDDropdown" optionLabel="fullname" optionValue="_id"
          formControlName="buyer" placeholder="Select Buyer" class="w-full"></p-select>
      </div>
    </div>
   
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center space-x-4">
      </div>
    </div>
    <div class="max-w-full overflow-x-auto mb-4"  >
      <table  class="table-auto w-full bg-background-surface text-text-primary rounded-md shadow-sm" styleClass="p-datatable-gridlines" scrollHeight="300px">
          <thead class="bg-gray-300 text-text-secondary">
          <tr>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Item</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">GST (%)</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Quantity</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Rate (Ex-GST)</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Discount (%)</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Taxable Value</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">GST Amount</th>
            <th class="py-2 px-3 border-b border-border-light text-left text-sm font-semibold">Total Amount</th>
            <th class="py-2 px-3 border-b border-border-light text-center text-sm font-semibold">Actions</th>
          </tr>
        </thead>
        <tbody formArrayName="items" >
          <tr *ngFor="let itemFormGroup of itemsFormArray.controls; let i = index" [formGroupName]="i"
            class="hover:bg-gray-50 transition-colors duration-150">
            <td class="py-1 px-3 border-b border-border-light">
              <p-select appendTo="body" type="text" formControlName="product" (onChange)="onProductChange($event, i)"
                [options]="InvoiceObject.productdrop" (ngModelChange)="onItemValueChange(i)" optionValue="_id" optionLabel="title"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-white text-gray-900"></p-select>
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="gstRate" (ngModelChange)="onItemValueChange(i)"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-white text-gray-900"
                step="0.01" />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="quantity" (ngModelChange)="onItemValueChange(i)"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-white text-gray-900"
                step="1" />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="rate" (ngModelChange)="onItemValueChange(i)"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-white text-gray-900"
                step="0.01" />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="discount" (ngModelChange)="onItemValueChange(i)"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-white text-gray-900"
                step="0.01" />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="taxableValue"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-gray-100 text-gray-900"
                readonly />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="gstAmount"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-gray-100 text-gray-900"
                readonly />
            </td>
            <td class="py-1 px-3 border-b border-border-light">
              <input type="number" formControlName="amount"
                class="w-full border-gray-300 rounded-md shadow-sm focus:border-primary-light focus:ring focus:ring-primary-light focus:ring-opacity-50 text-sm h-8 bg-gray-100 text-gray-900"
                readonly />
            </td>
            <td class="py-1 px-3 border-b border-border-light text-center flex items-center justify-center space-x-2">
              <a type="button" class="text-primary hover:text-primary-hover text-sm" (click)="addItem()">
                <i class="pi pi-check" style="font-size: 1rem"></i>
              </a>
              <a type="button" class="text-error hover:text-error-hover text-sm" (click)="removeItem(i)">
                <i class="pi pi-times" style="font-size: 1rem"></i>
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="flex items-center space-x-4">
      <div class="flex items-center">
        <input type="checkbox" id="roundUp" formControlName="roundUp"
          class="mr-1 rounded border-gray-600 text-purple-500 focus:ring-purple-500"
          (change)="calculateInvoiceTotals()" />
        <label for="roundUp" class="ml-1 text-sm text-gray-500">Round Up</label>
      </div>
      <div class="flex items-center">
        <input type="checkbox" id="roundDown" formControlName="roundDown"
          class="mr-1 rounded border-gray-600 text-purple-500 focus:ring-purple-500"
          (change)="calculateInvoiceTotals()" />
        <label for="roundDown" class="ml-1 text-sm text-gray-500">Round Down</label>
      </div>
    </div>    
    <div class="bg-gray-200 text-gray-900 shadow-lg rounded-lg p-6 mb-6 flex">
      <div class="w-3/4 pr-4">
        <h3 class="font-semibold text-md mb-2">Place of Supply</h3>
        <p class="font-normal">{{ invoiceForm.get('placeOfSupply')?.value || 'N/A' }}</p>
      </div>
      <div class="w-2/3">
        <div class="mb-2 flex justify-between">
          <span class="font-semibold">Sub Total:</span>
          <span>₹ {{ invoiceForm.get('subTotal')?.value | number : "1.2-2" }}</span>
        </div>
        <div class="mb-2 flex justify-between">
          <span class="font-semibold">GST:</span>
          <span>₹ {{ invoiceForm.get('gst')?.value | number : "1.2-2" }}</span>
        </div>
        <div class="mb-2 flex justify-between">
          <span class="font-semibold">CESS:</span>
          <span>₹ {{ invoiceForm.get('cess')?.value | number : "1.2-2" }}</span>
        </div>
        <div class="mb-2 flex justify-between">
          <span class="font-semibold">Discount:</span>
          <span>₹ {{ invoiceForm.get('totalDiscount')?.value | number : "1.2-2" }}</span>
        </div>
        <div class="mb-2 flex justify-between border-t border-gray-600 pt-2">
          <span class="font-semibold">Taxable Value:</span>
          <span>₹ {{ invoiceForm.get('taxableValue')?.value  }}</span>
        </div>
        <div class="mt-4 border-t border-gray-600 pt-4 flex justify-between items-start">
          <div class="w-1/2 pr-4">
            <h2 class="text-md font-semibold mb-2">Signature</h2>
            <div class="border-b-2 border-gray-400 h-12"></div>
            <p class="text-gray-600 text-xs mt-2">Date: <span id="currentDateRight"></span></p>
          </div>
          <div class="w-1/2 text-right">
            <h2 class="text-lg font-semibold">Total (INR)</h2>
            <h2 class="text-lg font-semibold">
              ₹ {{ invoiceForm.get('totalAmount')?.value | number : "1.2-2" }}
            </h2>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="text-center">
    <button type="button"
      class="bg-pink-500 hover:bg-pink-700 text-gray-900 py-2 px-4 rounded-md transition duration-300 ease-in-out"
      (click)="saveInvoice()">
      Save & Continue
    </button>
  </div>
</div> 
<!-- <div class="bg-gray-900 text-gray-900">
  <div class="w-full mx-auto p-6 bg-gray-200 shadow-md mt-10 rounded-lg">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold text-purple-400">GST Invoice</h1>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="invoiceNumber" class="block text-sm font-medium text-gray-300">Invoice No*</label>
          <input type="text" id="invoiceNumber" [(ngModel)]="gstData.invoiceNumber" placeholder="Enter Invoice No"
            class="mt-1 block w-full rounded-md border-gray-600 shadow-sm h-10 bg-white text-gray-900 focus:ring-purple-500 focus:border-purple-500" />
        </div>
        <div>
          <label for="invoiceDate" class="block text-sm font-medium text-gray-300">Invoice Date*</label>
          <input type="date" id="invoiceDate" [(ngModel)]="gstData.invoiceDate"
            class="mt-1 block w-full rounded-md border-gray-600 shadow-sm h-10 bg-white text-gray-900 focus:ring-purple-500 focus:border-purple-500" />
        </div>
        <div>
          <label for="dueDate" class="block text-sm font-medium text-gray-300">Due Date</label>
          <input type="date" id="dueDate" [(ngModel)]="gstData.dueDate" placeholder="Enter Due Date"
            class="mt-1 block w-full rounded-md border-gray-600 shadow-sm h-10 bg-white text-gray-900 focus:ring-purple-500 focus:border-purple-500" />
        </div>
      </div>
      <div class="border-2 border-dashed border-gray-600 rounded-md p-8 flex flex-col items-center justify-center">
        <i class="fas fa-image text-gray-400 text-5xl"></i>
        <div class="bg-white p-4 rounded-md">
          <h2 class="text-lg font-semibold mb-2 text-gray-300">
            Place of Supply (Buyer Address)
          </h2>
          <textarea id="placeOfSupply" [(ngModel)]="gstData.placeOfSupply" rows="3"
            placeholder="Buyer Address will be shown here"
            class="mt-1 block w-full rounded-md border-gray-600 shadow-sm bg-gray-200 text-gray-900 focus:ring-purple-500 focus:border-purple-500"
            readonly></textarea>
        </div>
      </div>
    </div>
    <div class="flex justify-between mb-6"></div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="bg-white p-4 rounded-md">
        <h2 class="text-lg font-semibold mb-4">Billed By (Your Details)</h2>
        <p-select appendTo="body" [options]="sellersDrop" optionLabel="name" optionValue="_id"
          [(ngModel)]="gstData.seller" placeholder="Select Seller" class="w-full"></p-select>
         (onChange)="getsellerData()" 
      </div>
      <div class="bg-white p-4 rounded-md">
        <h2 class="text-lg font-semibold mb-4">Billed To (Client Details)</h2>
        <p-select appendTo="body" [options]="customerIDDropdown" optionLabel="fullname" optionValue="_id"
          [(ngModel)]="gstData.buyer" placeholder="Select Buyer" class="w-full"></p-select>
         (onChange)="getCustomerData()" 
      </div>
    </div>
    <div class="flex justify-between items-center mb-6">
      <div class="flex items-center space-x-4">
         <select
          [(ngModel)]="gstData.currency"
          class="block w-full border-gray-600 rounded-md shadow-sm h-10 bg-gray-200 text-gray-900 focus:ring-purple-500 focus:border-purple-500"
        > 
         <option *ngFor="let currency of currencies" [value]="currency.value">
            {{ currency.label }}
          </option>
        </select> 
      </div>
    </div>
    <div class="max-w-full overflow-x-auto mb-6">
      <table class="table-auto w-full bg-white text-gray-900">
         <thead class="bg-gray-200">
          <tr>
            <th class="py-2 px-4 border-b border-gray-600">Item</th>
            <th class="py-2 px-4 border-b border-gray-600">GST (%)</th>
            <th class="py-2 px-4 border-b border-gray-600">Quantity</th>
            <th class="py-2 px-4 border-b border-gray-600">Rate</th>
            <th class="py-2 px-4 border-b border-gray-600">Taxable Value</th>
            <th class="py-2 px-4 border-b border-gray-600">CGST Amount</th>
            <th class="py-2 px-4 border-b border-gray-600">SGST Amount</th>
            <th class="py-2 px-4 border-b border-gray-600">Total Amount</th>
            <th class="py-2 px-4 border-b border-gray-600">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of gstData.items; let i = index">
            <td class="py-2 px-4 border-b border-gray-600">
              <p-select
                appendTo="body"
                type="text"
                [(ngModel)]="gstData.items[i].product"
                (onChange)="getproductdata()"
                [options]="productdrop"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                optionValue="_id"
                optionLabel="title"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
              ></p-select>
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].gstRate"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="0.01"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].quantity"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="1"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].rate"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="0.01"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].taxableValue"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].cgstAmount"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].sgstAmount"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input
                type="number"
                [(ngModel)]="gstData.items[i].amount"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true"
              />
            </td>
            <td class="py-2 px-4 border-b border-gray-600 text-center">
              <button
                type="button"
                class="text-red-500 hover:text-red-700"
                (click)="removeItem(i)"
              >
                <i class="fas fa-trash">remove</i>
              </button>
              <button
                type="button"
                class="text-blue-500 hover:text-blue-700 ml-2"
                (click)="addItem()"
              >
                <i class="fas fa-plus">add</i>
              </button>
            </td>
          </tr>
        </tbody> 
        <thead class="bg-gray-200">
          <tr>
            <th class="py-2 px-4 border-b border-gray-600">Item</th>
            <th class="py-2 px-4 border-b border-gray-600">GST (%)</th>
            <th class="py-2 px-4 border-b border-gray-600">Quantity</th>
            <th class="py-2 px-4 border-b border-gray-600">Rate (Ex-GST)</th>
            <th class="py-2 px-4 border-b border-gray-600">Discount (%)</th>
            <th class="py-2 px-4 border-b border-gray-600">Taxable Value</th>
            <th class="py-2 px-4 border-b border-gray-600">GST Amount</th>
            <th class="py-2 px-4 border-b border-gray-600">Total Amount</th>
            <th class="py-2 px-4 border-b border-gray-600">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of gstData.items; let i = index">
            <td class="py-2 px-4 border-b border-gray-600">
              <p-select appendTo="body" type="text" [(ngModel)]="gstData.items[i].product"
                (onChange)="onProductChange($event, i)" [options]="productdrop"
                (ngModelChange)="onItemValueChange(gstData.items[i])" optionValue="_id" optionLabel="title"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"></p-select>
               <p-select
                appendTo="body"
                type="text"
                [(ngModel)]="gstData.items[i].product"
                (onChange)="onProductChange($event, i)"
                [options]="productdrop"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                optionValue="_id"
                optionLabel="title"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
              ></p-select> 
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].gstRate"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="0.01" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].quantity"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="1" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].rate"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="0.01" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].discount"
                (ngModelChange)="onItemValueChange(gstData.items[i])"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                step="0.01" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].taxableValue"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].gstAmount"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600">
              <input type="number" [(ngModel)]="gstData.items[i].amount"
                class="w-full border-gray-600 rounded-md shadow-sm focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 h-10 bg-gray-200 text-gray-900"
                [readonly]="true" />
            </td>
            <td class="py-2 px-4 border-b border-gray-600 text-center">
              <button type="button" class="text-red-500 hover:text-red-700" (click)="removeItem(i)">
                <i class="fas fa-trash">remove</i>
              </button>
              <button type="button" class="text-blue-500 hover:text-blue-700 ml-2" (click)="addItem()">
                <i class="fas fa-plus">add</i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="bg-white p-4 rounded-md"></div>
      <div class="bg-white p-4 rounded-md"></div>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
      <div class="bg-white p-4 rounded-md flex items-center">
        <input type="checkbox" id="roundUp"
          class="mr-2 rounded border-gray-600 text-purple-500 focus:ring-purple-500 bg-gray-200"
          (change)="calculateInvoiceTotals()" />
        <label for="roundUp" class="ml-2 text-sm text-gray-300">Round Up</label>
      </div>
      <div class="bg-white p-4 rounded-md flex items-center">
        <input type="checkbox" id="roundDown"
          class="mr-2 rounded border-gray-600 text-purple-500 focus:ring-purple-500 bg-gray-200"
          (change)="calculateInvoiceTotals()" />
        <label for="roundDown" class="ml-2 text-sm text-gray-300">Round Down</label>
      </div>
    </div>
    <div class="bg-gray-200 text-gray-900 shadow-lg rounded-lg p-6 mb-6">
       <table class="table-auto w-full">
        <thead>
          <tr>
            <th class="py-2 px-4 text-left">Description</th>
            <th class="py-2 px-4 text-right">Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">Sub Total</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.subTotal | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">SGST</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ calculateTotalSgst() | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">CGST</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ calculateTotalCgst() | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">IGST</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.igst | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">CESS</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.cess | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4">Discount</td>
            <td class="py-2 px-4 text-right">
              ₹ {{ gstData.totalDiscount | number : "1.2-2" }}
            </td>
          </tr>
        </tbody>
      </table> 
      <table class="table-auto w-full">
        <thead>
          <tr>
            <th class="py-2 px-4 text-left">Description</th>
            <th class="py-2 px-4 text-right">Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">Sub Total</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.subTotal | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">GST</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.gst | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4 border-b border-gray-600">CESS</td>
            <td class="py-2 px-4 border-b border-gray-600 text-right">
              ₹ {{ gstData.cess | number : "1.2-2" }}
            </td>
          </tr>
          <tr>
            <td class="py-2 px-4">Discount</td>
            <td class="py-2 px-4 text-right">
              ₹ {{ gstData.totalDiscount | number : "1.2-2" }}
            </td>
          </tr>
        </tbody>
      </table>
      <div class="flex justify-between items-center mt-4">
        <button type="button"
          class="bg-transparent hover:bg-blue-500 text-blue-400 font-semibold hover:text-gray-900 py-2 px-4 border border-blue-500 hover:border-transparent rounded transition duration-300 ease-in-out text-sm">
          + Add More Fields
        </button>
        <button type="button"
          class="bg-transparent hover:bg-blue-500 text-blue-400 font-semibold hover:text-gray-900 py-2 px-4 border border-blue-500 hover:border-transparent rounded transition duration-300 ease-in-out text-sm">
          + Show Total In Words
        </button>
      </div>
      <div class="flex justify-between items-center border-t border-gray-600 pt-4 mt-4">
        <h2 class="text-lg font-semibold">Total (INR)</h2>
        <h2 class="text-lg font-semibold">
          ₹ {{ gstData.totalAmount | number : "1.2-2" }}
        </h2>
      </div>
    </div>
  </div>
  <div class="text-center">
    <button type="button"
      class="bg-pink-500 hover:bg-pink-700 text-gray-900 py-2 px-4 rounded-md transition duration-300 ease-in-out"
      (click)="saveInvoice()">
      Save & Continue
    </button>
  </div>
</div> -->
