<div class="h-[calc(100vh-56px)] flex flex-col overflow-hidden bg-[var(--theme-bg-secondary)]">

  <div class="card-filter p-4 bg-[var(--theme-bg-primary)] shadow-md">
    <div class="flex items-center justify-between">
      <h4 class="text-xl font-bold text-[var(--theme-text-heading)]">Invoice List</h4>
    </div>
    <div class="mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4 items-end">

      <div class="flex flex-col">
        <label for="buyer" class="text-sm font-medium text-[var(--theme-text-secondary)] mb-1">Buyer</label>
        <p-select id="buyer" appendTo="body" [options]="customerIDDropdown" [(ngModel)]="invoiceFilter.buyer"
          [filter]="true" filterBy="fullname" optionLabel="fullname" optionValue="_id" [showClear]="true"
          placeholder="Select Buyer" (onChange)="applyFiltersAndReset()" />
      </div>

      <div class="flex flex-col">
        <label for="status" class="text-sm font-medium text-[var(--theme-text-secondary)] mb-1">Status</label>
        <p-select id="status" appendTo="body" [options]="statusOptions" [(ngModel)]="invoiceFilter.status"
          (onChange)="applyFiltersAndReset()" placeholder="All Status" [showClear]="true" />
      </div>

      <div class="flex flex-col">
        <label for="invoiceNumber" class="text-sm font-medium text-[var(--theme-text-secondary)] mb-1">Invoice #</label>
        <input pInputText id="invoiceNumber" [(ngModel)]="invoiceFilter.invoiceNumber" (input)="applyFiltersAndReset()"
          placeholder="Search Invoice Number" />
      </div>

      <div class="flex flex-col lg:col-span-2">
        <label class="text-sm font-medium text-[var(--theme-text-secondary)] mb-1">Invoice Date Range</label>
        <div class="flex items-center gap-2">
          <input pInputText type="date" id="createdFrom" [(ngModel)]="invoiceFilter.createdFrom"
            (change)="applyFiltersAndReset()" class="w-full" />
          <span class="text-[var(--theme-text-secondary)]">to</span>
          <input pInputText type="date" id="createdTo" [(ngModel)]="invoiceFilter.createdTo"
            (change)="applyFiltersAndReset()" class="w-full" />
        </div>
      </div>

      <div class="flex items-end gap-2">
        <p-button (click)="applyFiltersAndReset()" label="Apply" icon="pi pi-check" styleClass="p-button-sm"></p-button>
        <p-button (click)="resetFilters()" label="Reset" icon="pi pi-refresh"
          styleClass="p-button-sm p-button-outlined"></p-button>
      </div>
    </div>
  </div>

  <div class="flex-grow card mt-1 p-4 bg-[var(--theme-bg-primary)]">
    <app-shared-grid [data]="data" [gridHeight]="'280px'" [headerFilter]="false" [rowSelectionMode]="rowSelectionMode"
      [GridName]="'Invoice Details'" [column]="column" (eventFromGrid)="eventFromGrid($event)"
      (gridReady)="onGridReady($event)" (scrolledToBottom)="onScrolledToBottom($event)">
    </app-shared-grid>
  </div>
</div>

<p-dialog header="Invoice Preview" [(visible)]="showpdf" [modal]="true" [style]="{ width: '90vw', maxWidth: '1200px' }">
  <app-invoice-print [Id]="invoiceId"></app-invoice-print>
</p-dialog>
<!-- <div class="h-[calc(100vh-56px)] flex flex-col overflow-hidden">
  <div class="ag-grid-header-filter-area card-filter">
    <div class="flex items-center justify-between px-6 py-3">
      <div class="header-info">
        <h4 class="text-xl font-bold tracking-wide text-[var(--theme-text-heading)]">Invoice List</h4>
      </div>

      <div class="header-controls flex items-center flex-wrap justify-end gap-3 sm:gap-4">
        <p-select id="buyer" appendTo="body" [options]="customerIDDropdown" [(ngModel)]="invoiceFilter.buyer"
          (onChange)="getData()" [checkmark]="true" [filter]="true" filterBy="fullname" optionLabel="fullname"
          optionValue="id" [showClear]="true" placeholder="Select Buyer"
          class="flex-1 min-w-[10rem] p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />

        
        <p-select id="status" appendTo="body" [options]="statusOptions" optionLabel="label" optionValue="value"
          [(ngModel)]="invoiceFilter.status" (onChange)="getData()" placeholder="All Status"
          class="flex-1 min-w-[8rem] p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />

        
        <input pInputText id="invoiceNumber" [(ngModel)]="invoiceFilter.invoiceNumber" (change)="getData()"
          placeholder="Invoice Number"
          class="flex-1 min-w-[10rem] p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />

        
        <input pInputText id="buyerEmail" [(ngModel)]="invoiceFilter.buyerEmail" (change)="getData()"
          placeholder="Buyer Email"
          class="flex-1 min-w-[12rem] p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />

        
        <div class="flex items-center space-x-2 flex-1 min-w-[18rem]">
          <input pInputText type="date" id="createdFrom" [(ngModel)]="invoiceFilter.createdFrom" (change)="getData()"
            placeholder="From Date"
            class="flex-1 p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />
          <span class="text-[var(--theme-text-secondary)]">to</span>
          <input pInputText type="date" id="createdTo" [(ngModel)]="invoiceFilter.createdTo" (change)="getData()"
            placeholder="To Date"
            class="flex-1 p-inputtext-sm border border-[var(--theme-border-primary)] rounded-md" />
        </div>

        
        <div class="flex space-x-2">
    
        </div>
      </div>
    </div>
  </div>

  <div class="card mt-1">
    <app-shared-grid [gridHeight]="'210px'" [headerFilter]="false" [data]="data" [GridName]="'Invoice Details'"
      [showActions]="true" [rowSelectionMode]="rowSelectionMode" [rowClassRules]="rowClassrules" [column]="column"
      (eventFromGrid)="eventFromGrid($event)"></app-shared-grid>
  </div>
</div>


<p-dialog header="Invoice" [(visible)]="showpdf" [modal]="true" [style]="{ width: '90vw', maxWidth: '1200px' }"
  class="bg-[var(--theme-dialog-bg)] text-[var(--theme-text-primary)] rounded-xl">
  <app-invoice-print [Id]="invoiceId"></app-invoice-print>
</p-dialog> -->