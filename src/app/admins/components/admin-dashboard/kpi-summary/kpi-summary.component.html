<!-- <div class="kpi-dashboard">

  
  <header class="dashboard-header">
    <h1>KPI Dashboard</h1>
    <p class="subtitle">Overview of business performance</p>
  </header>
]

  
  <div class="kpi-grid">
    <div class="kpi-card">
      <h3>Total Revenue</h3>
      <p class="value">‚Çπ{{data.salesSummary.totalRevenue | number:'1.0-0'}}</p>
    </div>
    <div class="kpi-card">
      <h3>Gross Profit</h3>
      <p class="value">‚Çπ{{data.salesSummary.grossProfit | number:'1.0-0'}}</p>
      <span class="sub">Margin: {{data.salesSummary.profitMargin | number:'1.1-1'}}%</span>
    </div>
    <div class="kpi-card">
      <h3>Avg Order Value</h3>
      <p class="value">‚Çπ{{data.salesSummary.averageOrderValue | number:'1.0-0'}}</p>
    </div>
    <div class="kpi-card">
      <h3>Total Sales</h3>
      <p class="value">{{data.salesSummary.totalSales}}</p>
    </div>
  </div>

  
  <div class="insights-grid">
    <div class="kpi-card">
      <h3>Customer Insights</h3>
      <p>New Customers: <strong>{{data.customerInsights.newCustomers}}</strong></p>
      <p>Customers with Dues: 
        <span *ngIf="data.customerInsights.customersWithDues.length; else noDues">
          {{data.customerInsights.customersWithDues.length}}
        </span>
        <ng-template #noDues>None üéâ</ng-template>
      </p>
    </div>
    <div class="kpi-card">
      <h3>Inventory Overview</h3>
      <p>Total Inventory Value: ‚Çπ{{data.inventoryOverview.totalInventoryValue | number:'1.0-0'}}</p>
      <p>Total Items in Stock: {{data.inventoryOverview.totalItemsInStock}}</p>
      <p class="low-stock" *ngIf="data.inventoryOverview.lowStockCount > 0">
        ‚ö†Ô∏è Low Stock Items: {{data.inventoryOverview.lowStockCount}}
      </p>
    </div>
  </div>

  
  <div class="kpi-card large">
    <h3>Financial Health</h3>
    <p>Total Collected: ‚Çπ{{data.financialHealth.totalCollected | number:'1.0-0'}}</p>
    <div class="progress-bar">
      <div class="progress" [style.width.%]="(data.financialHealth.totalCollected / data.salesSummary.totalRevenue) * 100"></div>
    </div>
    <span class="sub">{{ (data.financialHealth.totalCollected / data.salesSummary.totalRevenue) * 100 | number:'1.0-0'}}% Collected</span>
  </div>

</div>
 -->
<div class="kpi-dashboard">

  <!-- Header -->
  <header class="dashboard-header">
    <h1>KPI Dashboard</h1>
    <p class="subtitle">Overview of business performance</p>
  </header>

  <!-- Filter Bar
  <div class="se-filter-bar">
    <div class="se-filter-field">
      <label for="dateRange">Date Range</label>
      <p-calendar id="dateRange" [(ngModel)]="dateRange" selectionMode="range"></p-calendar>
    </div>
    <div class="se-filter-field">
      <label for="branch">Branch</label>
      <p-dropdown id="branch" [options]="branches" [(ngModel)]="selectedBranch"></p-dropdown>
    </div>
    <div class="se-filter-actions">
      <button pButton type="button" label="Apply Filter" class="p-button"></button>
    </div>
  </div> -->

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <div class="kpi-card">
      <div class="kpi-icon revenue"><i class="pi pi-wallet"></i></div>
      <h3>Total Revenue</h3>
      <p class="value">‚Çπ{{data.salesSummary.totalRevenue | number:'1.0-0'}}</p>
    </div>

    <div class="kpi-card">
      <div class="kpi-icon profit"><i class="pi pi-chart-pie"></i></div>
      <h3>Gross Profit</h3>
      <p class="value">‚Çπ{{data.salesSummary.grossProfit | number:'1.0-0'}}</p>
      <span class="sub">Margin: {{data.salesSummary.profitMargin | number:'1.1-1'}}%</span>
    </div>

    <div class="kpi-card">
      <div class="kpi-icon order"><i class="pi pi-shopping-cart"></i></div>
      <h3>Avg Order Value</h3>
      <p class="value">‚Çπ{{data.salesSummary.averageOrderValue | number:'1.0-0'}}</p>
    </div>

    <div class="kpi-card">
      <div class="kpi-icon sales"><i class="pi pi-chart-line"></i></div>
      <h3>Total Sales</h3>
      <p class="value">{{data.salesSummary.totalSales}}</p>
    </div>
  </div>

  <!-- Insights -->
  <div class="insights-grid">
    <div class="kpi-card">
      <h3><i class="pi pi-users"></i> Customer Insights</h3>
      <div class="insight">
        <i class="pi pi-user-plus"></i> New Customers: <strong>{{data.customerInsights.newCustomers}}</strong>
      </div>
      <div class="insight">
        <i class="pi pi-exclamation-triangle"></i> 
        Customers with Dues: 
        <span *ngIf="data.customerInsights.customersWithDues.length; else noDues">
          {{data.customerInsights.customersWithDues.length}}
        </span>
        <ng-template #noDues><span class="success">‚úÖ None</span></ng-template>
      </div>
    </div>

    <div class="kpi-card">
      <h3><i class="pi pi-box"></i> Inventory Overview</h3>
      <div class="insight"><i class="pi pi-database"></i> Value: ‚Çπ{{data.inventoryOverview.totalInventoryValue | number:'1.0-0'}}</div>
      <div class="insight"><i class="pi pi-tags"></i> Stock: {{data.inventoryOverview.totalItemsInStock}}</div>
      <div class="insight low-stock" *ngIf="data.inventoryOverview.lowStockCount > 0">
        <i class="pi pi-exclamation-circle"></i> Low Stock Items: {{data.inventoryOverview.lowStockCount}}
      </div>
    </div>
  </div>

  <!-- Financial Health -->
  <div class="kpi-card large financial">
    <h3><i class="pi pi-credit-card"></i> Financial Health</h3>
    <div class="circular-progress">
      <svg>
        <circle class="bg" cx="50%" cy="50%" r="45"></circle>
        <circle class="progress" 
          [attr.stroke-dasharray]="2 * Math.PI * 45" 
          [attr.stroke-dashoffset]="(1 - (data.financialHealth.totalCollected / data.salesSummary.totalRevenue)) * 2 * Math.PI * 45"
          cx="50%" cy="50%" r="45"></circle>
      </svg>
      <div class="progress-value">
        {{ (data.financialHealth.totalCollected / data.salesSummary.totalRevenue) * 100 | number:'1.0-0'}}%
      </div>
    </div>
    <p>Total Collected: ‚Çπ{{data.financialHealth.totalCollected | number:'1.0-0'}}</p>
  </div>

</div>
