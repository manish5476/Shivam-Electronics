<div *ngIf="data; else noDataOrLoading" class="sales-forecast-page">

  <header class="page-header">
    <div>
      <h1 class="page-title">Sales Forecast</h1>
      <p class="page-subtitle">Projected sales performance based on historical data.</p>
    </div>
  </header>

  <div class="kpi-grid">
    <div class="summary-kpi-card forecast-card">
      <div class="kpi-icon-wrapper bg-[var(--theme-accent-primary-light)]">
        <i class="pi pi-chart-line text-[var(--theme-accent-primary)]"></i>
      </div>
      <div class="kpi-content">
        <span class="kpi-value">{{ data.forecast.nextMonth | currency:'INR':'symbol':'1.0-0' }}</span>
        <span class="kpi-label">Forecast for Next Month</span>
      </div>
    </div>
    </div>

  <div class="se-card">
    <h3 class="card-header">Historical Performance vs. Forecast</h3>
    <div class="chart-container">
      <ngx-charts-bar-vertical
        [results]="forecastChartData"
        [scheme]="chartColorScheme"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="true"
        legendTitle="Legend"
        [showXAxisLabel]="true"
        xAxisLabel="Month"
        [showYAxisLabel]="true"
        yAxisLabel="Total Sales"
        [gradient]="false">
      </ngx-charts-bar-vertical>
    </div>
  </div>
</div>

<ng-template #noDataOrLoading>
  <div class="flex justify-center items-center h-screen">
    <p class="text-xl" [style.color]="'var(--theme-text-secondary)'">
      Sales forecast data is currently unavailable.
    </p>
  </div>
</ng-template>